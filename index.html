<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="2026 Travel Tech Comparison â€” 19 portable laptops ranked by weight, battery life, and real-world travel value for Southeast Asia carry-on use.">
  <!-- Open Graph -->
  <meta property="og:title"       content="2026 Travel Tech Â· Carry-On Comparison">
  <meta property="og:description" content="19 laptops ranked for Southeast Asia carry-on travel â€” weight, battery, MSRP compared.">
  <meta property="og:type"        content="website">
  <meta name="twitter:card"       content="summary">
  <meta name="twitter:title"      content="2026 Travel Tech Â· Carry-On Comparison">
  <meta name="twitter:description" content="19 laptops ranked for Southeast Asia carry-on travel â€” weight, battery, MSRP compared.">
  <!-- SVG emoji favicon â€” zero external request -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âœˆï¸</text></svg>">
  <title>2026 Travel Tech Â· Carry-On Comparison</title>
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DESIGN TOKENS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    :root {
      --bg:          #f4f5f7;
      --surface:     #ffffff;
      --surface-2:   #f0f1f4;
      --border:      #e2e4ea;
      --text:        #1a1d23;
      --text-muted:  #5d6475;   /* FIX A-4/A-5: was #6b7280 â€” now 5.0:1 on surface-2 */
      --accent:      #2563eb;
      --accent-soft: #eff6ff;
      --radius:      12px;
      --radius-sm:   6px;
      --shadow:      0 1px 3px rgba(0,0,0,.07), 0 4px 16px rgba(0,0,0,.05);
      --shadow-up:   0 4px 12px rgba(0,0,0,.10), 0 8px 32px rgba(0,0,0,.07);
      --font:        -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      --mono:        'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
      --nav-h:       60px;
      --ease:        220ms cubic-bezier(.4,0,.2,1);
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg:          #0f1117;
        --surface:     #1a1d23;
        --surface-2:   #22252e;
        --border:      #2e3240;
        --text:        #e8eaf0;
        --text-muted:  #8b93a7;
        --accent:      #3b82f6;
        --accent-soft: #1e2a4a;
        --shadow:      0 1px 3px rgba(0,0,0,.28), 0 4px 16px rgba(0,0,0,.22);
        --shadow-up:   0 4px 12px rgba(0,0,0,.38), 0 8px 32px rgba(0,0,0,.28);
      }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RESET & BASE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; font-size: 16px; }
    body {
      font-family: var(--font);
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
    button { cursor: pointer; font-family: inherit; }

    /* â”€â”€ Skip link (A-2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .skip-link {
      position: absolute; top: -52px; left: 16px; z-index: 200;
      background: var(--accent); color: #fff;
      padding: 8px 16px; border-radius: var(--radius-sm);
      font-size: .85rem; font-weight: 600;
      text-decoration: none;
      transition: top var(--ease);
    }
    .skip-link:focus { top: 8px; outline: 3px solid #fff; outline-offset: 2px; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FOCUS-VISIBLE (A-3)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .ctrl-btn:focus-visible,
    .nav-links a:focus-visible,
    thead th button:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 3px;
      border-radius: 3px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       NAV
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    nav {
      position: sticky; top: 0; z-index: 100;
      height: var(--nav-h);
      background: color-mix(in srgb, var(--surface) 88%, transparent);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center;
      padding: 0 clamp(16px, 4vw, 48px);
      gap: 32px;
    }
    .nav-brand {
      font-weight: 800; font-size: .95rem;
      letter-spacing: -.02em; white-space: nowrap;
    }
    .nav-brand span { color: var(--accent); }
    .nav-links {
      display: flex; gap: 24px; list-style: none;
      margin-left: auto; flex-wrap: wrap;
    }
    .nav-links a {
      /* FIX V-2: removed duplicate transition property */
      font-size: .85rem; font-weight: 500;
      color: var(--text-muted);
      padding-bottom: 2px;
      border-bottom: 2px solid transparent;
      transition: color var(--ease), border-color var(--ease);
    }
    .nav-links a.active, .nav-links a:hover {
      color: var(--accent); border-bottom-color: var(--accent);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HERO
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .hero {
      padding: clamp(48px,8vw,96px) clamp(16px,4vw,48px) clamp(32px,5vw,64px);
      max-width: 900px;
    }
    .hero-eyebrow {
      display: inline-flex; align-items: center; gap: 8px;
      font-size: .72rem; font-weight: 700;
      letter-spacing: .08em; text-transform: uppercase;
      color: var(--accent); background: var(--accent-soft);
      padding: 4px 12px; border-radius: 20px; margin-bottom: 20px;
    }
    .hero h1 {
      font-size: clamp(2.2rem,5.5vw,3.8rem);
      font-weight: 800; line-height: 1.08;
      letter-spacing: -.03em; margin-bottom: 20px;
    }
    .hero h1 .hl { color: var(--accent); }
    .hero > p {
      font-size: clamp(.95rem,2vw,1.15rem);
      color: var(--text-muted); max-width: 640px; margin-bottom: 32px;
    }
    .hero-stats { display: flex; gap: 32px; flex-wrap: wrap; }
    .hstat strong {
      display: block; font-size: 1.5rem; font-weight: 700; letter-spacing: -.02em;
    }
    .hstat span {
      font-size: .7rem; color: var(--text-muted);
      text-transform: uppercase; letter-spacing: .06em;
    }
    .disclaimer {
      margin-top: 16px; padding: 10px 16px;
      background: var(--surface-2); border-radius: var(--radius-sm);
      font-size: .75rem; color: var(--text-muted);
      border-left: 3px solid var(--accent); max-width: 640px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SECTION WRAPPER
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .section {
      padding: clamp(32px,5vw,64px) clamp(16px,4vw,48px);
      max-width: 1440px; margin: 0 auto;
    }
    .section-hd { margin-bottom: 28px; }
    .section-hd h2 {
      font-size: clamp(1.3rem,3vw,1.9rem);
      font-weight: 700; letter-spacing: -.02em; margin-bottom: 6px;
    }
    .section-hd p { color: var(--text-muted); max-width: 660px; font-size: .9rem; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CONTROLS
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .controls {
      display: flex; flex-wrap: wrap; gap: 10px 14px;
      align-items: center; margin-bottom: 24px;
    }
    .ctrl-label {
      font-size: .72rem; font-weight: 700; letter-spacing: .06em;
      text-transform: uppercase; color: var(--text-muted);
    }
    .btn-grp { display: flex; gap: 6px; flex-wrap: wrap; }
    .ctrl-btn {
      padding: 6px 14px;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: var(--surface); color: var(--text);
      font-size: .8rem; font-weight: 500;
      transition: all var(--ease);
    }
    .ctrl-btn:hover  { border-color: var(--accent); color: var(--accent); }
    .ctrl-btn.active { background: var(--accent); border-color: var(--accent); color: #fff; }
    .ctrl-sep {
      width: 1px; height: 22px; background: var(--border); align-self: center;
    }
    /* FIX U-6: result count with aria-live */
    .result-count {
      font-size: .75rem; color: var(--text-muted);
      margin-left: auto; align-self: center; white-space: nowrap;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CARD GRID
       Each .device-card is a CSS container â€”
       @container fires on the CARD's own width,
       completely independent of the viewport.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 18px;
    }

    /* Register each card as its own container */
    .device-card {
      container-type: inline-size;
      container-name: card;
    }

    .card-inner {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden; height: 100%;
      transition: box-shadow var(--ease), transform var(--ease);
    }
    .card-inner:hover {
      box-shadow: var(--shadow-up);
      transform: translateY(-2px);
    }

    /* â”€â”€ Card thumbnail / image area â”€â”€â”€â”€â”€â”€â”€ */
    .card-thumb {
      aspect-ratio: 16/9;
      position: relative;
      overflow: hidden;
      background: var(--surface-2);
      display: flex; align-items: center; justify-content: center;
    }
    .card-thumb::before {
      content: '';
      position: absolute; inset: 0; z-index: 0;
      background: linear-gradient(135deg, var(--c, #2563eb) 0%, transparent 70%);
      opacity: .12;
    }
    .card-img {
      position: absolute; inset: 0; z-index: 1;
      width: 100%; height: 100%;
      object-fit: contain;
      padding: 10px;
      display: block;
    }
    /* FIX I-4: emoji fallback, hidden until image errors */
    .card-emoji {
      position: absolute; inset: 0; z-index: 2;
      display: none;
      align-items: center; justify-content: center;
      font-size: 3.8rem;
      pointer-events: none;
    }
    .card-brand-tag {
      position: absolute; top: 10px; left: 10px; z-index: 3;
      background: var(--surface); border: 1px solid var(--border);
      border-radius: 4px; padding: 2px 8px;
      font-size: .62rem; font-weight: 700;
      letter-spacing: .06em; text-transform: uppercase;
      color: var(--text-muted);
    }
    .card-avail-tag {
      position: absolute; top: 10px; right: 10px; z-index: 3;
      padding: 2px 8px; border-radius: 20px;
      font-size: .62rem; font-weight: 600;
    }

    /* â”€â”€ Card body â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .card-body { padding: 14px 16px 16px; }
    .card-name {
      font-size: .98rem; font-weight: 700;
      letter-spacing: -.01em; margin-bottom: 2px;
    }
    .card-chip { font-size: .72rem; color: var(--text-muted); margin-bottom: 12px; }

    .card-specs {
      display: grid; grid-template-columns: repeat(3, 1fr);
      gap: 6px; margin-bottom: 12px;
    }
    .spec-cell {
      background: var(--surface-2); border-radius: var(--radius-sm);
      padding: 7px 6px; text-align: center;
    }
    .spec-cell .v {
      display: block; font-size: .92rem;
      font-weight: 700; letter-spacing: -.01em;
    }
    .spec-cell .l {
      /* FIX A-7: was .58rem (9.3px), now .65rem (10.4px) */
      font-size: .65rem; color: var(--text-muted);
      text-transform: uppercase; letter-spacing: .05em;
    }

    .card-note {
      font-size: .77rem; color: var(--text-muted);
      line-height: 1.55; margin-bottom: 10px;
    }
    .card-sea {
      /* FIX U-4: was .7rem, now .75rem for better mobile legibility */
      font-size: .75rem; color: var(--accent);
      background: var(--accent-soft);
      border-radius: var(--radius-sm);
      padding: 6px 10px; line-height: 1.45; margin-bottom: 10px;
    }

    .score-row { display: flex; align-items: center; gap: 8px; }
    .score-lbl {
      font-size: .65rem; color: var(--text-muted);
      text-transform: uppercase; letter-spacing: .05em; white-space: nowrap;
    }
    .score-track {
      flex: 1; height: 5px;
      background: var(--surface-2); border-radius: 3px; overflow: hidden;
    }
    .score-fill {
      height: 100%; border-radius: 3px;
      background: linear-gradient(90deg, var(--accent), #06b6d4);
      transition: width .7s cubic-bezier(.4,0,.2,1);
    }
    .score-num {
      font-size: .7rem; font-weight: 700;
      color: var(--accent); min-width: 26px; text-align: right;
    }

    /* FIX F-5: empty state when no cards match filter */
    .empty-state {
      grid-column: 1 / -1;
      text-align: center;
      padding: 56px 16px;
      color: var(--text-muted);
      font-size: .95rem;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CONTAINER QUERY â€” wide card layout
       FIX V-1: threshold was 400px â€” never fired
       because auto-fill produces ~282px columns.
       Changed to 240px so it fires on any card
       â‰¥ 300px (the grid's minmax minimum).
       Demo: at ~480px+ viewport all cards switch
       from stacked â†’ side-by-side. On a narrow
       sidebar below 240px, they stay stacked â€”
       that's the point: responsive to the
       container, not the viewport.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @container card (min-width: 240px) {
      .card-inner { display: grid; grid-template-columns: 150px 1fr; }
      .card-thumb { aspect-ratio: auto; min-height: 190px; }
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       COMPARISON TABLE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .table-scroll {
      overflow-x: auto;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
    }
    table {
      width: 100%; border-collapse: collapse;
      background: var(--surface); font-size: .85rem;
    }
    thead th {
      background: var(--surface-2);
      padding: 11px 15px; text-align: left;
      font-size: .7rem; font-weight: 700;
      text-transform: uppercase; letter-spacing: .06em;
      color: var(--text-muted); border-bottom: 1px solid var(--border);
      white-space: nowrap;
    }
    thead th button {
      background: none; border: none; color: inherit;
      font: inherit; cursor: pointer;
      display: inline-flex; align-items: center; gap: 3px; padding: 0;
    }
    thead th button:hover { color: var(--accent); }
    thead th.t-active button { color: var(--accent); }
    tbody tr { border-bottom: 1px solid var(--border); transition: background var(--ease); }
    tbody tr:last-child { border-bottom: none; }
    tbody tr:hover { background: var(--accent-soft); }
    tbody td { padding: 11px 15px; }
    .td-name { font-weight: 600; font-size: .88rem; }
    .td-brand { font-size: .72rem; color: var(--text-muted); margin-top: 1px; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BADGES â€” light mode + dark mode (V-3)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .badge {
      display: inline-block; padding: 2px 8px;
      border-radius: 20px; font-size: .68rem; font-weight: 600;
    }
    .bg      { background: #dcfce7; color: #15803d; }
    .ba      { background: #fef3c7; color: #92400e; }
    .br      { background: #fee2e2; color: #b91c1c; }
    .bb      { background: var(--accent-soft); color: var(--accent); }
    .tag-now  { background: #dcfce7; color: #15803d; }
    .tag-soon { background: #fef3c7; color: #92400e; }

    /* FIX V-3: dark-mode badge overrides */
    @media (prefers-color-scheme: dark) {
      .bg       { background: #14532d; color: #86efac; }
      .ba       { background: #451a03; color: #fcd34d; }
      .br       { background: #450a0a; color: #fca5a5; }
      .tag-now  { background: #14532d; color: #86efac; }
      .tag-soon { background: #451a03; color: #fcd34d; }
    }

    .rank-pip {
      width: 26px; height: 26px;
      display: flex; align-items: center; justify-content: center;
      border-radius: 50%; font-size: .75rem; font-weight: 700;
      background: var(--surface-2); color: var(--text-muted);
    }
    tr.r1 .rank-pip { background: #fef9c3; color: #713f12; }
    tr.r2 .rank-pip { background: #f1f5f9; color: #475569; }
    tr.r3 .rank-pip { background: #fef3c7; color: #78350f; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CONTAINER QUERY EXPLAINER
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .explainer-box {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: clamp(20px,4vw,44px);
      box-shadow: var(--shadow);
    }
    .exp-grid {
      display: grid; grid-template-columns: 1fr 1fr;
      gap: 36px; margin-top: 24px;
    }
    @media (max-width: 680px) { .exp-grid { grid-template-columns: 1fr; } }
    .exp-sub { font-size: .88rem; font-weight: 700; margin-bottom: 10px; }
    .code-box {
      background: #0d1117; color: #a5f3fc;
      border-radius: var(--radius-sm); padding: 14px 16px;
      font-family: var(--mono); font-size: .76rem;
      line-height: 1.75; overflow-x: auto; tab-size: 2;
    }
    .cm  { color: #6b7280; }
    .kw  { color: #818cf8; }
    .sel { color: #f472b6; }
    .vl  { color: #34d399; }
    .exp-note { font-size: .78rem; color: var(--text-muted); margin-top: 10px; line-height: 1.6; }
    .support-grid { display: grid; gap: 7px; margin-bottom: 20px; }
    .sup-row {
      display: flex; justify-content: space-between; align-items: center;
      background: var(--surface-2); padding: 8px 12px;
      border-radius: var(--radius-sm); font-size: .83rem;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FADE-IN (IntersectionObserver)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .fi {
      opacity: 0; transform: translateY(14px);
      transition: opacity .5s ease, transform .5s ease;
    }
    .fi.vis { opacity: 1; transform: translateY(0); }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FOOTER
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    footer {
      text-align: center;
      padding: 28px clamp(16px,4vw,48px);
      color: var(--text-muted); font-size: .78rem;
      border-top: 1px solid var(--border);
    }
    footer p + p { margin-top: 6px; }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PRINT STYLESHEET
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media print {
      nav, .controls, .score-track, .skip-link,
      .hero-eyebrow, .section-hd p,
      .explainer-box { display: none !important; }
      * { box-shadow: none !important; border-color: #ccc !important; }
      body { background: #fff; color: #000; font-size: 10pt; }
      .hero { padding: 16pt 0 12pt; }
      .hero h1 { font-size: 20pt; }
      .card-grid { grid-template-columns: repeat(3,1fr) !important; gap: 10px; }
      .device-card { container-type: normal; }
      .card-inner  { break-inside: avoid; }
      section, .section { padding: 12pt 0; }
      h2 { font-size: 14pt; }
      table { font-size: 8pt; }
      thead th { background: #eee; }
      tbody tr:hover { background: transparent; }
    }
  </style>
</head>
<body>

<!-- FIX A-2: skip-to-content link (first focusable element) -->
<a class="skip-link" href="#main-content">Skip to main content</a>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav role="navigation" aria-label="Primary navigation">
  <div class="nav-brand" aria-label="Site title">Travel<span>Tech</span> 2026</div>
  <ul class="nav-links" role="list">
    <li><a href="#cards" aria-label="Jump to device cards">Cards</a></li>
    <li><a href="#table" aria-label="Jump to comparison table">Table</a></li>
    <li><a href="#learn" aria-label="Jump to Container Queries explainer">Learn CQ</a></li>
  </ul>
</nav>

<!-- FIX A-1: <main> landmark wraps all primary content -->
<main id="main-content">

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HERO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="section" role="banner" style="padding-top:clamp(48px,8vw,96px)">
  <div class="hero">
    <!-- FIX A-6: decorative emoji wrapped in aria-hidden -->
    <div class="hero-eyebrow"><span aria-hidden="true">âœˆï¸</span> Southeast Asia Â· Carry-On Edition Â· Feb 2026</div>
    <h1>Pack <span class="hl">smarter.</span><br>Spec harder.</h1>
    <p>
      19 machines. Three numbers that actually matter on the road: mass, runtime, and
      what it'll cost you at Power Buy in Bangkok or Harvey Norman in KL. All devices
      are shipping now or confirmed within 90 days of this snapshot.
    </p>
    <div class="hero-stats" role="list" aria-label="Summary figures">
      <div class="hstat" role="listitem"><strong>19</strong><span>Devices</span></div>
      <div class="hstat" role="listitem"><strong>1.96â€“3.89</strong><span>Weight (lbs)</span></div>
      <div class="hstat" role="listitem"><strong>$849â€“$2,499</strong><span>MSRP range</span></div>
      <div class="hstat" role="listitem"><strong>9â€“22h</strong><span>Battery range</span></div>
    </div>
    <!-- FIX A-6: decorative emoji aria-hidden -->
    <p class="disclaimer">
      <span aria-hidden="true">âš ï¸</span> MSRP is USD and approximate â€” Thai Baht / Malaysian Ringgit prices vary by
      retailer and import duties. Surface Pro 11 weight is tablet-only (+0.65 lbs for
      Type Cover). "Soon" devices are confirmed and shipping within 90 days.
    </p>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     DEVICE CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section" id="cards" aria-labelledby="cards-h">
  <div class="section-hd">
    <h2 id="cards-h">Device Lineup</h2>
    <p>
      Cards use <strong>CSS Container Queries</strong> â€” each card switches between
      stacked and side-by-side layouts based on <em>its own</em> width, not the
      viewport. Sort or filter, then resize your browser to watch them respond independently.
    </p>
  </div>

  <div class="controls" role="toolbar" aria-label="Sort and filter controls">
    <span class="ctrl-label" id="sort-lbl">Sort</span>
    <div class="btn-grp" role="group" aria-labelledby="sort-lbl">
      <button class="ctrl-btn active" data-sort="score"   aria-pressed="true">Travel Score</button>
      <button class="ctrl-btn"        data-sort="weight"  aria-pressed="false">Weight â†‘</button>
      <button class="ctrl-btn"        data-sort="battery" aria-pressed="false">Battery â†“</button>
      <button class="ctrl-btn"        data-sort="price"   aria-pressed="false">Price â†‘</button>
    </div>
    <div class="ctrl-sep" role="separator" aria-hidden="true"></div>
    <span class="ctrl-label" id="filter-lbl">Filter</span>
    <div class="btn-grp" role="group" aria-labelledby="filter-lbl">
      <button class="ctrl-btn active" data-filter="all"        aria-pressed="true">All</button>
      <button class="ctrl-btn"        data-filter="now"        aria-pressed="false">Shipping now</button>
      <button class="ctrl-btn"        data-filter="ultralight" aria-pressed="false">â‰¤ 2.5 lbs</button>
      <button class="ctrl-btn"        data-filter="light"      aria-pressed="false">â‰¤ 3.0 lbs</button>
    </div>
    <!-- FIX U-6: live result count -->
    <span id="result-count" role="status" aria-live="polite" class="result-count"></span>
  </div>

  <div class="card-grid" id="card-grid" aria-label="Device comparison cards">
    <!-- Populated by JS -->
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     COMPARISON TABLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section" id="table" aria-labelledby="table-h">
  <div class="section-hd">
    <h2 id="table-h">Full Spec Sheet</h2>
    <p>Click any column header to sort. Travel Score: 50% lightest weight + 50% longest battery, normalised 0â€“100.</p>
  </div>
  <div class="table-scroll" role="region" aria-label="Device specification table" tabindex="0">
    <table aria-label="2026 Travel Tech full comparison">
      <thead>
        <tr>
          <th scope="col" style="width:38px">#</th>
          <th scope="col">Device</th>
          <th scope="col">Chip</th>
          <th scope="col" id="th-weight">
            <button onclick="tblSort('weight')" aria-label="Sort by weight">Weight <span aria-hidden="true">â‡…</span></button>
          </th>
          <th scope="col" id="th-battery">
            <button onclick="tblSort('battery')" aria-label="Sort by battery life">Battery <span aria-hidden="true">â‡…</span></button>
          </th>
          <th scope="col" id="th-msrp">
            <button onclick="tblSort('msrp')" aria-label="Sort by price">MSRP <span aria-hidden="true">â‡…</span></button>
          </th>
          <th scope="col" id="th-score">
            <button onclick="tblSort('score')" aria-label="Sort by travel score">Score <span aria-hidden="true">â‡…</span></button>
          </th>
          <th scope="col">Avail.</th>
        </tr>
      </thead>
      <tbody id="tbl-body"><!-- Populated by JS --></tbody>
    </table>
  </div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CONTAINER QUERY EXPLAINER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="section" id="learn" aria-labelledby="learn-h">
  <div class="explainer-box fi">
    <div class="section-hd" style="margin-bottom:0">
      <h2 id="learn-h">Why Container Queries?</h2>
      <p>The pattern used to build this page â€” and the right tool for any component that needs to respond to where it's placed, not how wide the screen is.</p>
    </div>
    <div class="exp-grid">
      <div>
        <p class="exp-sub">The old approach â€” viewport-dependent</p>
        <div class="code-box" role="region" aria-label="Old CSS: viewport media query">
<span class="cm">/* Fires when the *screen* is narrow.
   Breaks if the card sits in a sidebar
   on a wide monitor â€” query never fires. */</span>
<span class="kw">@media</span> (max-width: <span class="vl">600px</span>) {
  <span class="sel">.card-inner</span> {
    <span class="kw">display</span>: <span class="vl">block</span>;
  }
}</div>
        <p class="exp-sub" style="margin-top:20px">The container query approach</p>
        <div class="code-box" role="region" aria-label="New CSS: container query">
<span class="cm">/* Step 1: register the card as a container */</span>
<span class="sel">.device-card</span> {
  <span class="kw">container-type</span>: <span class="vl">inline-size</span>;
  <span class="kw">container-name</span>: <span class="vl">card</span>;
}

<span class="cm">/* Step 2: query the card's OWN width */</span>
<span class="kw">@container</span> card (min-width: <span class="vl">240px</span>) {
  <span class="sel">.card-inner</span> {
    <span class="kw">display</span>: <span class="vl">grid</span>;
    <span class="kw">grid-template-columns</span>: <span class="vl">150px 1fr</span>;
  }
}</div>
        <p class="exp-note">
          Card fires at 240px of <em>its own</em> available space. Works correctly
          in a full-width grid, a sidebar, a modal â€” anywhere. The viewport width
          is irrelevant to this decision.
        </p>
      </div>
      <div>
        <p class="exp-sub">Browser support â€” February 2026</p>
        <div class="support-grid">
          <div class="sup-row"><span>Chrome / Edge 105+</span>  <span class="badge bg">Full âœ“</span></div>
          <div class="sup-row"><span>Firefox 110+</span>        <span class="badge bg">Full âœ“</span></div>
          <div class="sup-row"><span>Safari 16+</span>          <span class="badge bg">Full âœ“</span></div>
          <div class="sup-row"><span>iOS Safari / Chrome</span> <span class="badge bg">Full âœ“</span></div>
          <div class="sup-row"><span>Baseline status</span>     <span class="badge bb">Widely available</span></div>
        </div>
        <p class="exp-sub">What you'll see on this page</p>
        <p class="exp-note">
          The cards on this page use a 240px threshold. Since the grid's minimum
          column width is 300px, every card is always wider than 240px â€” so the
          side-by-side layout fires on all viewports. The value of the container
          query becomes clear when you imagine placing the same card component
          in a narrow sidebar: below 240px, it automatically reverts to the
          stacked layout without any code change.
          <br><br>
          Use <code style="background:var(--surface-2);padding:1px 5px;border-radius:3px;font-family:var(--mono);font-size:.74rem">container-type: inline-size</code>
          on the wrapper element. The container cannot query itself â€” only its
          descendants query it using
          <code style="background:var(--surface-2);padding:1px 5px;border-radius:3px;font-family:var(--mono);font-size:.74rem">@container</code>.
        </p>
      </div>
    </div>
  </div>
</section>

</main><!-- end #main-content -->

<footer role="contentinfo">
  <p>Data snapshot: February 2026. MSRP is USD and approximate â€” Thai / Malaysian retail prices differ due to import duties and distributor margins. Specs from manufacturer pages.</p>
  <p>Built with vanilla HTML Â· CSS Grid Â· Container Queries Â· Zero frameworks Â· Zero dependencies.</p>
</footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  DATA  â€” slug matches images/{slug}.webp
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const DEVICES = [
  {
    id: 1, slug: 'macbook_air_m4',
    name: 'MacBook Air 13"', brand: 'Apple', chip: 'Apple M4',
    weight: 2.70, battery: 18, msrp: 1099, avail: 'Now',
    icon: 'ğŸ', color: '#1d1d1f',
    note: 'M4 efficiency means the 18-hour spec holds up in real use â€” not just a screen-off idle figure. macOS Sequoia local AI features run without a network connection, useful on slow hostel Wi-Fi.',
    sea: 'Apple Stores: Central World (BKK) & Suria KLCC (KL). AppleCare+ claimable at both.'
  },
  {
    id: 2, slug: 'zenbook_s14_oled',
    name: 'ZenBook S 14 OLED', brand: 'ASUS', chip: 'Core Ultra 7 258V',
    weight: 2.65, battery: 15, msrp: 1299, avail: 'Now',
    icon: 'ğŸ’', color: '#00a0e9',
    note: 'OLED panel covers 100% DCI-P3 at 120Hz â€” a real spec if you color-grade road footage. ASUS service centers appear in almost every Thai and Malaysian city.',
    sea: 'ASUS Power Mall (Thailand) and Harvey Norman (Malaysia) stock the full SKU range.'
  },
  {
    id: 3, slug: 'lg_gram_14_2026',
    name: 'LG Gram 14 (2026)', brand: 'LG', chip: 'Core Ultra 7 265H',
    weight: 2.18, battery: 22, msrp: 1299, avail: 'Now',
    icon: 'ğŸª¶', color: '#a50034',
    note: 'At 2.18 lbs it\'s lighter than most 13-inch ultrabooks while running a 14-inch display. The obvious pick when bag weight is the hard constraint.',
    sea: 'Authorized resellers in MBK (BKK) and Low Yat Plaza (KL). Check warranty coverage before buying away from home.'
  },
  {
    id: 4, slug: 'thinkpad_x1_carbon_13',
    name: 'ThinkPad X1 Carbon 13', brand: 'Lenovo', chip: 'Core Ultra 7 258V',
    weight: 2.48, battery: 15, msrp: 1749, avail: 'Now',
    icon: 'ğŸ–¤', color: '#e2231a',
    note: 'If you type for 6 hours on transit days, the keyboard justifies the premium alone. Specify the Snapdragon X Elite SKU for noticeably better battery-per-watt over the Intel model.',
    sea: 'Lenovo flagship stores in Siam Paragon (BKK) and Mid Valley Megamall (KL). Enterprise-grade parts stocking.'
  },
  {
    id: 5, slug: 'dell_xps_13_2025',
    name: 'Dell XPS 13 (2025)', brand: 'Dell', chip: 'Core Ultra 7 256V',
    weight: 2.73, battery: 12, msrp: 1299, avail: 'Now',
    icon: 'ğŸ”·', color: '#007db8',
    note: 'Dell shrank it again. Genuinely pocketable but two USB-C and nothing else â€” budget for a hub if you present at conferences or connect to hotel TVs.',
    sea: 'Dell.com ships to Thailand and Malaysia. Lazada and Shopee carry official Dell seller listings.'
  },
  {
    id: 6, slug: 'galaxy_book5_pro_14',
    name: 'Galaxy Book5 Pro 14', brand: 'Samsung', chip: 'Core Ultra 7 258V',
    weight: 2.69, battery: 16, msrp: 1299, avail: 'Now',
    icon: 'ğŸ’«', color: '#1428a0',
    note: 'Galaxy ecosystem integration â€” cross-device clipboard, DeX mode, instant S25 hotspot â€” is genuinely useful if your phone is already Samsung. Dynamic AMOLED 2X is the sharpest panel at this price.',
    sea: 'Samsung Experience Stores across Thailand and Malaysia. Walk-in same-day warranty swaps are common.'
  },
  {
    id: 7, slug: 'hp_omnibook_ultra_14',
    name: 'HP OmniBook Ultra 14', brand: 'HP', chip: 'Ryzen AI 9 HX 375',
    weight: 3.09, battery: 17, msrp: 1299, avail: 'Now',
    icon: 'ğŸ”µ', color: '#0096d6',
    note: 'Ryzen AI 9 gives the most headroom for local inference workloads at this price â€” relevant offline. Heavier than rivals but 17 hours compensates on long-haul legs.',
    sea: 'HP flagship stores in IT City malls and Machines Malaysia. Wide service network extends to secondary cities.'
  },
  {
    id: 8, slug: 'surface_pro_11',
    name: 'Surface Pro 11', brand: 'Microsoft', chip: 'Snapdragon X Plus',
    weight: 1.96, battery: 14, msrp: 999, avail: 'Now',
    icon: 'ğŸªŸ', color: '#737373',
    note: 'Listed weight is tablet-only; Type Cover adds ~0.65 lbs. Snapdragon build runs fanless â€” genuinely silent. Detachable form factor clears airport security faster.',
    sea: 'Available at Power Buy (Thailand) and Machines stores (Malaysia). Check ARM app compatibility with your specific software first.'
  },
  {
    id: 9, slug: 'framework_13_amd',
    name: 'Framework 13 AMD', brand: 'Framework', chip: 'Ryzen AI 7 360',
    weight: 2.87, battery: 12, msrp: 849, avail: 'Now',
    icon: 'ğŸ”§', color: '#e84c0e',
    note: 'If a port snaps off in Chiang Mai, a $9 expansion card ships to a hotel address. Lowest entry price of the 19 machines here, still a competitive Ryzen AI chip.',
    sea: 'No physical retail in Thailand or Malaysia â€” order via framework.computer with international shipping. Self-repair is the warranty model.'
  },
  {
    id: 10, slug: 'acer_swift_14_ai',
    name: 'Acer Swift 14 AI', brand: 'Acer', chip: 'Core Ultra 7 258V',
    weight: 3.09, battery: 13, msrp: 999, avail: 'Now',
    icon: 'ğŸŒ€', color: '#83b81a',
    note: 'Nothing flashy, nothing missing. At $999 it undercuts heavier rivals while keeping the Intel NPU. The most honest value proposition at this weight class.',
    sea: 'Acer has one of the densest authorized service networks in both countries â€” easier to find service outside the capital cities.'
  },
  {
    id: 11, slug: 'yoga_slim_7x_gen10',
    name: 'Yoga Slim 7x Gen 10', brand: 'Lenovo', chip: 'Snapdragon X Elite X1E-78-100',
    weight: 2.82, battery: 15, msrp: 1199, avail: 'Now',
    icon: 'ğŸ§˜', color: '#e2231a',
    note: 'Snapdragon X Elite handles 4K timeline exports well enough to replace a desktop for short-form creators. 2.8K OLED makes Lightroom viable without an external monitor.',
    sea: 'Lenovo flagship stores in Siam Paragon and Mid Valley Megamall. ARM app compatibility has improved significantly across 2025.'
  },
  {
    id: 12, slug: 'matebook_x_pro_2025',
    name: 'MateBook X Pro (2025)', brand: 'Huawei', chip: 'Core Ultra 9 185H',
    weight: 2.71, battery: 15, msrp: 1499, avail: 'Now',
    icon: 'ğŸŒ¸', color: '#cf0a2c',
    note: 'Premium aluminium, 3.1K OLED, strong thermals in 2.71 lbs. Best spec-per-gram ratio at the premium tier. KL pricing is more competitive than Bangkok.',
    sea: 'Huawei Experience Stores prominent in Malaysia (Pavilion KL, Sunway). Thai availability is patchier. No Google Play on HarmonyOS â€” check app requirements first.'
  },
  {
    id: 13, slug: 'razer_blade_14_2025',
    name: 'Razer Blade 14 (2025)', brand: 'Razer', chip: 'Ryzen AI 9 365 + RTX 4070',
    weight: 3.89, battery: 9, msrp: 2499, avail: 'Now',
    icon: 'ğŸ', color: '#00d15f',
    note: 'The only GPU-class machine on the list that doesn\'t look like one. 9 hours holds under light load; push the RTX 4070 and it drops to ~2.5. Bring this when your work needs GPU compute.',
    sea: 'Available at JIB Computer (Thailand) and Razer authorized stores in KL. Expect 10â€“15% import premium over listed MSRP.'
  },
  // â”€â”€ Lenovo Yoga Slim full current lineup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {
    id: 14, slug: 'yoga_slim_9i_gen10',
    name: 'Yoga Slim 9i Gen 10', brand: 'Lenovo', chip: 'Core Ultra 7 258V',
    weight: 2.76, battery: 17, msrp: 1760, avail: 'Now',
    icon: 'ğŸŒŸ', color: '#e2231a',
    note: 'The flagship of the Yoga Slim line â€” 4K OLED with an under-display camera keeps the bezel clean. 75Wh battery with Intel Core Ultra 258V posts honest all-day numbers.',
    sea: 'Lenovo flagship stores in Thailand and Malaysia. Premium tier, so stock in SEA varies â€” check lenovo.com/th and lenovo.com/my for availability before travelling.'
  },
  {
    id: 15, slug: 'yoga_slim_7i_aura_14',
    name: 'Yoga Slim 7i Aura 14"', brand: 'Lenovo', chip: 'Core Ultra 5 228V',
    weight: 2.62, battery: 17, msrp: 1099, avail: 'Now',
    icon: 'âœ¨', color: '#e2231a',
    note: 'The entry point into the Yoga Slim Aura range. At 2.62 lbs with 17 hours claimed, it undercuts the MacBook Air M4 on price while matching it on battery. OLED option available.',
    sea: 'Available at Lenovo flagship and major electronics chains. Competitive pricing in the KL and Bangkok markets â€” often bundled with Lenovo warranty extensions.'
  },
  {
    id: 16, slug: 'yoga_slim_7i_aura_15',
    /* FIX C-6: was 256V â€” corrected to 258V */
    name: 'Yoga Slim 7i Aura 15"', brand: 'Lenovo', chip: 'Core Ultra 7 258V',
    weight: 3.20, battery: 12, msrp: 1399, avail: 'Now',
    icon: 'ğŸ–¥ï¸', color: '#e2231a',
    note: 'If you need screen real estate for multi-window work or spreadsheets without an external monitor, the 15.3-inch panel earns its extra weight. The compromise is battery â€” 12h is honest but not exceptional.',
    sea: 'Lenovo stores and Harvey Norman Malaysia carry the 15-inch. Less common in Thailand than the 14-inch variants â€” check stock before assuming availability.'
  },
  {
    id: 17, slug: 'yoga_slim_7x_gen11',
    name: 'Yoga Slim 7x Gen 11', brand: 'Lenovo', chip: 'Snapdragon X2 Elite',
    weight: 2.82, battery: 20, msrp: 949, avail: 'Soon',
    icon: 'ğŸš€', color: '#e2231a',
    note: 'Snapdragon X2 Elite with a claimed 29-hour battery (20h is a realistic all-day figure). At $949 it will be the most competitive Snapdragon ultrabook at launch â€” Q2 2026.',
    sea: 'Not yet shipping. Announced at CES 2026 â€” expect Thailand/Malaysia availability within 60 days of US launch via Lenovo flagship stores.'
  },
  {
    id: 18, slug: 'yoga_slim_7a_gen11',
    name: 'Yoga Slim 7a Gen 11', brand: 'Lenovo', chip: 'Ryzen AI 7 445',
    weight: 2.53, battery: 16, msrp: 849, avail: 'Soon',
    icon: 'ğŸ”´', color: '#e2231a',
    note: 'The AMD entry into the Yoga Slim Aura-class lineup. Ryzen AI 7 445 at $849 targets the Framework 13 on price but adds OLED and a lighter chassis â€” the trade-off is repairability.',
    sea: 'Announced for UK and Asia-Pacific markets. Malaysia availability confirmed â€” Thailand timing follows within 30â€“60 days of global launch.'
  },
  {
    id: 19, slug: 'yoga_slim_7i_ultra_aura',
    name: 'Yoga Slim 7i Ultra Aura', brand: 'Lenovo', chip: 'Core Ultra 7 (Series 3)',
    weight: 2.15, battery: 18, msrp: 1499, avail: 'Soon',
    icon: 'ğŸ’¡', color: '#e2231a',
    note: 'Sub-kg at 975g / 2.15 lbs with a 2.8K 1100-nit OLED. Intel Core Ultra Series 3 keeps thermals in check at 13.9mm thin. Will challenge the MacBook Air M4 directly on the ultralight tier.',
    sea: 'CES 2026 announcement, Q2 2026 launch. Expected in Lenovo flagship stores in Thailand and Malaysia within 60 days of US retail.'
  },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TRAVEL SCORE (0â€“100)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function() {
  const ws = DEVICES.map(d => d.weight);
  const bs = DEVICES.map(d => d.battery);
  const minW = Math.min(...ws), maxW = Math.max(...ws);
  const minB = Math.min(...bs), maxB = Math.max(...bs);
  DEVICES.forEach(d => {
    const wPct = 1 - (d.weight - minW) / (maxW - minW);
    const bPct =     (d.battery - minB) / (maxB - minB);
    d.score = Math.round(wPct * 50 + bPct * 50);
  });
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let cardSort   = 'score';
let cardFilter = 'all';
let tblCol     = 'score';
let tblAsc     = false;

// FIX F-4: column-specific default sort direction
const TBL_DEFAULT_ASC = { weight: true, battery: false, msrp: true, score: false };

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const availClass = a => a === 'Now' ? 'tag-now' : 'tag-soon';
const wBadge = w => w <= 2.5 ? 'bg' : w <= 3.0 ? 'ba' : 'br';
const bBadge = b => b >= 16  ? 'bg' : b >= 12  ? 'ba' : 'br';
const sBadge = s => s >= 65  ? 'bg' : s >= 40  ? 'ba' : 'br';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  IMAGE ERROR HANDLER â€” delegated on card grid
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.getElementById('card-grid').addEventListener('error', e => {
  if (e.target.classList.contains('card-img')) {
    e.target.style.display = 'none';
    const fallback = e.target.nextElementSibling;
    if (fallback && fallback.classList.contains('card-emoji')) {
      fallback.style.display = 'flex';
    }
  }
}, true);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CARD RENDER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderCards() {
  let data = [...DEVICES];

  if (cardFilter === 'now')        data = data.filter(d => d.avail === 'Now');
  if (cardFilter === 'ultralight') data = data.filter(d => d.weight <= 2.5);
  if (cardFilter === 'light')      data = data.filter(d => d.weight <= 3.0);

  if      (cardSort === 'weight')  data.sort((a, b) => a.weight  - b.weight);
  else if (cardSort === 'battery') data.sort((a, b) => b.battery - a.battery);
  else if (cardSort === 'price')   data.sort((a, b) => a.msrp    - b.msrp);
  else                             data.sort((a, b) => b.score   - a.score);

  // FIX U-6: update live result count
  const countEl = document.getElementById('result-count');
  if (countEl) {
    countEl.textContent = data.length === DEVICES.length
      ? `${data.length} devices`
      : `${data.length} of ${DEVICES.length} devices`;
  }

  // FIX F-5: empty state when filter returns nothing
  if (data.length === 0) {
    document.getElementById('card-grid').innerHTML =
      '<p class="empty-state">No devices match this filter.</p>';
    return;
  }

  // FIX U-2: score bar starts at 0% â€” animated via rAF after paint
  document.getElementById('card-grid').innerHTML = data.map(d => `
    <article class="device-card fi"
             role="article"
             aria-label="${d.brand} ${d.name} â€” ${d.weight} lbs, ${d.battery}h battery, $${d.msrp.toLocaleString()} MSRP">
      <div class="card-inner">
        <div class="card-thumb" style="--c:${d.color}">
          <img class="card-img"
               src="images/${d.slug}.webp"
               alt="${d.brand} ${d.name} laptop"
               loading="lazy"
               decoding="async">
          <span class="card-emoji" aria-hidden="true">${d.icon}</span>
          <span class="card-brand-tag">${d.brand}</span>
          <span class="card-avail-tag ${availClass(d.avail)}"
                aria-label="Availability: ${d.avail}">${d.avail}</span>
        </div>
        <div class="card-body">
          <div class="card-name">${d.name}</div>
          <div class="card-chip">${d.chip}</div>
          <div class="card-specs" role="list" aria-label="Key specs">
            <div class="spec-cell" role="listitem">
              <span class="v" aria-label="${d.weight} pounds">${d.weight}</span>
              <span class="l">lbs</span>
            </div>
            <div class="spec-cell" role="listitem">
              <span class="v" aria-label="${d.battery} hours">${d.battery}h</span>
              <span class="l">battery</span>
            </div>
            <div class="spec-cell" role="listitem">
              <span class="v" aria-label="$${d.msrp.toLocaleString()}">$${d.msrp.toLocaleString()}</span>
              <span class="l">MSRP</span>
            </div>
          </div>
          <p class="card-note">${d.note}</p>
          <div class="card-sea" aria-label="Southeast Asia availability"><span aria-hidden="true">ğŸ“</span> ${d.sea}</div>
          <div class="score-row" aria-label="Travel score: ${d.score} out of 100">
            <span class="score-lbl">Travel Score</span>
            <div class="score-track" role="progressbar"
                 aria-valuenow="${d.score}" aria-valuemin="0" aria-valuemax="100">
              <div class="score-fill" style="width:0%" data-score="${d.score}"></div>
            </div>
            <span class="score-num">${d.score}</span>
          </div>
        </div>
      </div>
    </article>
  `).join('');

  // FIX U-2: double rAF ensures layout is committed before transition starts
  requestAnimationFrame(() => {
    requestAnimationFrame(() => {
      document.querySelectorAll('.score-fill').forEach(el => {
        el.style.width = el.dataset.score + '%';
      });
    });
  });

  attachFade();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TABLE RENDER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderTable() {
  let data = [...DEVICES];
  data.sort((a, b) => tblAsc ? a[tblCol] - b[tblCol] : b[tblCol] - a[tblCol]);

  const byScore = [...DEVICES].sort((a, b) => b.score - a.score);
  const rankOf  = {};
  byScore.forEach((d, i) => { rankOf[d.id] = i + 1; });

  // FIX U-7: update sort direction arrow (â†‘/â†“) on active column
  ['weight','battery','msrp','score'].forEach(c => {
    const el = document.getElementById('th-' + c);
    if (el) {
      el.classList.toggle('t-active', c === tblCol);
      const arrow = el.querySelector('span[aria-hidden]');
      if (arrow) arrow.textContent = c === tblCol ? (tblAsc ? 'â†‘' : 'â†“') : 'â‡…';
    }
  });

  document.getElementById('tbl-body').innerHTML = data.map(d => {
    const r = rankOf[d.id];
    return `
      <tr class="${r <= 3 ? 'r'+r : ''}">
        <td><div class="rank-pip" aria-label="Rank ${r}">${r}</div></td>
        <td>
          <div class="td-name">${d.name}</div>
          <div class="td-brand">${d.brand}</div>
        </td>
        <td style="font-size:.78rem;color:var(--text-muted)">${d.chip}</td>
        <td><span class="badge ${wBadge(d.weight)}" aria-label="${d.weight} lbs">${d.weight} lbs</span></td>
        <td><span class="badge ${bBadge(d.battery)}" aria-label="${d.battery} hours">${d.battery}h</span></td>
        <td>$${d.msrp.toLocaleString()}</td>
        <td><span class="badge ${sBadge(d.score)}">${d.score}</span></td>
        <td><span class="badge ${availClass(d.avail)}">${d.avail}</span></td>
      </tr>`;
  }).join('');
}

// FIX F-4: column-specific default sort direction
function tblSort(col) {
  tblAsc = (tblCol === col) ? !tblAsc : (TBL_DEFAULT_ASC[col] ?? false);
  tblCol = col;
  renderTable();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONTROLS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.querySelectorAll('[data-sort]').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('[data-sort]').forEach(b => {
      b.classList.remove('active'); b.setAttribute('aria-pressed','false');
    });
    btn.classList.add('active'); btn.setAttribute('aria-pressed','true');
    cardSort = btn.dataset.sort;
    renderCards();
  });
});

document.querySelectorAll('[data-filter]').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('[data-filter]').forEach(b => {
      b.classList.remove('active'); b.setAttribute('aria-pressed','false');
    });
    btn.classList.add('active'); btn.setAttribute('aria-pressed','true');
    cardFilter = btn.dataset.filter;
    renderCards();
  });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INTERSECTION OBSERVER â€” fade-in + nav active
//  FIX P-6: store observer ref, disconnect before
//  recreating to prevent accumulation on each render
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let fadeObs = null;

function attachFade() {
  if (fadeObs) fadeObs.disconnect();
  fadeObs = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if (e.isIntersecting) { e.target.classList.add('vis'); fadeObs.unobserve(e.target); }
    });
  }, { threshold: 0.08 });
  document.querySelectorAll('.fi:not(.vis)').forEach(el => fadeObs.observe(el));
}

const navLinks = document.querySelectorAll('.nav-links a');
const navObs   = new IntersectionObserver(entries => {
  entries.forEach(e => {
    if (e.isIntersecting)
      navLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#' + e.target.id));
  });
}, { rootMargin: '-45% 0px -50% 0px' });
document.querySelectorAll('section[id]').forEach(s => navObs.observe(s));

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderCards();
renderTable();
attachFade();
</script>
</body>
</html>
